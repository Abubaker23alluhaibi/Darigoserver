# Darigo Backend Server

ูุฐุง ูู ุงูุณูุฑูุฑ ุงูููุญุฏ ูุชุทุจูู ุฏุงุฑู go ุงูุนูุงุฑูุ ุฌุงูุฒ ููุฑูุน ุนูู Railway.

## ๐ ุงููุดุฑ ุงูุณุฑูุน ุนูู Railway

ุฑุงุฌุน ููู `RAILWAY_DEPLOYMENT.md` ููุญุตูู ุนูู ุฏููู ุดุงูู ุฎุทูุฉ ุจุฎุทูุฉ.

**ููุฎุต ุณุฑูุน:**
1. ุงุฑูุน ุงููุดุฑูุน ุฅูู GitHub
2. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ูู Railway
3. ุงุฑุจุท ุงููุณุชูุฏุน ูู GitHub
4. ุฃุถู ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ุฑุงุฌุน `DEPLOYMENT_CHECKLIST.md`)
5. ุงูุชุธุฑ ุญุชู ููุชูู ุงููุดุฑ

## ๐ฆ ุงูุชุซุจูุช

```bash
npm install
```

## โ๏ธ ุงูุฅุนุฏุงุฏ

1. ุงูุณุฎ ููู `.env.example` ุฅูู `.env`:
```bash
cp .env.example .env
```

2. ุนุฏูู ููู `.env` ูุฃุถู ูุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```env
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/database-name
JWT_SECRET=your-super-secret-key-change-this-in-production
JWT_EXPIRES_IN=7d
PORT=3001
NODE_ENV=development
CORS_ORIGIN=
```

## ๐ ุงูุชุดุบูู

### ุงูุชุทููุฑ
```bash
npm run dev
```

### ุงูุฅูุชุงุฌ
```bash
npm start
```

ุงูุฎุงุฏู ุณูุนูู ุนูู: `http://localhost:3001`

## ๐ก ุงููุณุงุฑุงุช ุงููุชุงุญุฉ

### ุงูุตุญุฉ ูุงููุญุต
- `GET /` - ูุนูููุงุช API
- `GET /api/health` - ูุญุต ุตุญุฉ ุงูุฎุงุฏู ููุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงููุตุงุฏูุฉ
- `POST /api/auth/register` - ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- `POST /api/auth/login` - ุชุณุฌูู ุงูุฏุฎูู
- `POST /api/auth/verify-token` - ุงูุชุญูู ูู ุงูุฑูุฒ ุงููููุฒ

### ุงูุนูุงุฑุงุช
- `GET /api/properties` - ุงูุญุตูู ุนูู ุงูุนูุงุฑุงุช (ุนุงู)
- `GET /api/properties/:id` - ุงูุญุตูู ุนูู ุนูุงุฑ ูุญุฏุฏ
- `POST /api/properties` - ุฅุถุงูุฉ ุนูุงุฑ ุฌุฏูุฏ (ูุชุทูุจ auth)
- `PUT /api/properties/:id` - ุชุญุฏูุซ ุนูุงุฑ (ูุชุทูุจ auth)
- `DELETE /api/properties/:id` - ุญุฐู ุนูุงุฑ (ูุชุทูุจ auth)
- `GET /api/properties/user/my-properties` - ุนูุงุฑุงุชู (ูุชุทูุจ auth)

### ุงููุณุชุฎุฏููู
- `GET /api/users/profile` - ุงูููู ุงูุดุฎุตู (ูุชุทูุจ auth)
- `PUT /api/users/profile` - ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู (ูุชุทูุจ auth)
- `GET /api/users/stats` - ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู (ูุชุทูุจ auth)

### ุงูุฅุฏุงุฑุฉ (admin only)
- `GET /api/admin/stats` - ุฅุญุตุงุฆูุงุช ุงูุฅุฏุงุฑุฉ
- `GET /api/admin/users` - ูุงุฆูุฉ ุงููุณุชุฎุฏููู
- `GET /api/admin/properties` - ูุงุฆูุฉ ุงูุนูุงุฑุงุช
- `PATCH /api/admin/properties/:id/status` - ุชุบููุฑ ุญุงูุฉ ุงูุนูุงุฑ
- `DELETE /api/admin/properties/:id` - ุญุฐู ุนูุงุฑ

## ๐ ุฅูุดุงุก ุญุณุงุจ ูุฏูุฑ

```bash
node scripts/createAdmin.js
```

ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ:
- ุงูุจุฑูุฏ: `admin@darigo.com`
- ูููุฉ ุงููุฑูุฑ: `admin123`

**โ๏ธ ุบูุฑ ูููุฉ ุงููุฑูุฑ ููุฑุงู ุจุนุฏ ุงููุดุฑ ูู ุงูุฅูุชุงุฌ!**

## ๐ ุงูุฃูุงู

- ุฌููุน ุงููุณุงุฑุงุช (ูุง ุนุฏุง ุงูุชุณุฌูู ูุชุณุฌูู ุงูุฏุฎูู) ุชุชุทูุจ `Authorization: Bearer <token>`
- ุงููุณุงุฑุงุช ุงูุฅุฏุงุฑูุฉ ุชุชุทูุจ `userType: 'admin'`
- ุงูุนูุงุฑุงุช ุงูุฌุฏูุฏุฉ ุชููู `status: 'pending'` ุญุชู ุชุชู ุงูููุงููุฉ ุนูููุง ูู ุงูุฃุฏูู
- CORS ูุญุฏูุฏ ุญุณุจ `CORS_ORIGIN` ูู ุงูุฅูุชุงุฌ

## ๐ ููุงุญุธุงุช

- ุงุณุชุฎุฏู `JWT_SECRET` ููู ุฌุฏุงู ูู ุงูุฅูุชุงุฌ (32+ ุญุฑู)
- Railway domains (`*.railway.app`) ูุณููุญุฉ ุชููุงุฆูุงู ูู CORS
- ุฌููุน ุงูุชูุงุฑูุฎ ุจุงููููุงุฏู
- ูุงุนุฏุฉ ุงูุจูุงูุงุช: MongoDB Atlas

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฎุทุฃ: "Cannot connect to MongoDB"
- ุชุฃูุฏ ูู ุฃู `MONGODB_URI` ุตุญูุญ
- ุชุฃูุฏ ูู ุฃู MongoDB Atlas ูุณูุญ ุจุงูุงุชุตุงูุงุช ูู IPs ุงูุฎุงุฑุฌูุฉ

### ุงูุฎุทุฃ: "Unauthorized"
- ุชุฃูุฏ ูู ุฅุฑุณุงู Token ูู header: `Authorization: Bearer <token>`
- ุชุฃูุฏ ูู ุฃู Token ุบูุฑ ููุชูู ุงูุตูุงุญูุฉ

### ุงูุฎุทุฃ: "Not allowed by CORS"
- ุฃุถู origin ุงูุฎุงุต ุจู ูู `CORS_ORIGIN`
- Railway domains ูุณููุญุฉ ุชููุงุฆูุงู

## ๐ ุงููููุงุช ุงููููุฉ

- `RAILWAY_DEPLOYMENT.md` - ุฏููู ุดุงูู ูููุดุฑ ุนูู Railway
- `DEPLOYMENT_CHECKLIST.md` - ูุงุฆูุฉ ูุญุต ุฌุงูุฒูุฉ ุงููุดุฑ
- `env.example` - ูุซุงู ูููุชุบูุฑุงุช ุงูุจูุฆูุฉ
- `railway.json` - ุฅุนุฏุงุฏุงุช Railway
- `Procfile` - ุฃูุฑ ุจุฏุก ุงูุชุดุบูู

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉุ ุชุญูู ูู:
1. Logs ูู Railway
2. Health check endpoint
3. ูุชุบูุฑุงุช ุงูุจูุฆุฉ
4. ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

**ุงูุฅุตุฏุงุฑ:** 1.0.0  
**ุฌุงูุฒ ูููุดุฑ:** โ ูุนู
